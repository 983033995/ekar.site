<section
  id="mask"
  class="fixed h-12 flex items-center left-5 w-full z-30 defaultAnimation"
>
  <a href="/" class="font-serif text-base font-thin dark:text-white text-black defaultAnimation fixed ">ekar</a>
  <i
    class="dark:text-white -rotate-45 text-black defaultAnimation absolute right-10 text-xl"
    id="tehmeToggle"></i>
</section>

<script is:inline>
const themeToggle = document.getElementById('tehmeToggle')
const toggleThemeIcon = () => {
  themeToggle.classList.toggle(
    'i-mdi-moon-waning-crescent',
    localStorage.getItem('globalTheme') === 'dark',
  )
  // themeToggle.classList.toggle(
  //   '-rotate-45',
  //   localStorage.getItem('globalTheme') === 'dark',
  // )
  themeToggle.classList.toggle(
    'i-mdi-white-balance-sunny',
    localStorage.getItem('globalTheme') !== 'dark',
  )
  // themeToggle.classList.toggle(
  //   'rotate-90',
  //   localStorage.getItem('globalTheme') !== 'dark',
  // )
}
const preferTheme = () => {
  const colorSchema = window.matchMedia('(prefers-color-scheme: dark)')
  const prefersDark = colorSchema.matches
  !localStorage.getItem('globalTheme')
    && localStorage.setItem('globalTheme', prefersDark ? 'dark' : 'light')
  const setting = localStorage.getItem('globalTheme')
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
  toggleThemeIcon()
  colorSchema.addEventListener('change', () => {
    document.documentElement.classList.toggle('dark', colorSchema.matches)
    localStorage.setItem(
      'globalTheme',
      colorSchema.matches ? 'dark' : 'light',
    )
    toggleThemeIcon()
  })
}
const toggleTheme = () => {
  const isDark = document.documentElement.classList.toggle('dark')
  localStorage.setItem('globalTheme', isDark ? 'dark' : 'light')
  toggleThemeIcon()
}
preferTheme()
themeToggle.addEventListener('click', toggleTheme)
</script>

<style>
  #mask::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 96px;
    -webkit-mask-image: linear-gradient(black,transparent);
    mask-image: linear-gradient(to bottom, black, transparent);
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
  }
</style>
