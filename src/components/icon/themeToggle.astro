  <i
    class="p-2 mr-2 ml-2  dark:text-white  text-black text-xl   cursor-pointer md:opacity-60 hover:opacity-100"
    id="themeToggle"
    />

<script is:inline>
const themeToggle = document.getElementById('themeToggle')
const toggleThemeIcon = () => {
  themeToggle.classList.toggle(
    'i-ph-sun',
    localStorage.getItem('globalTheme') !== 'dark',
  )
  themeToggle.classList.toggle(
    'i-ph-moon',
    localStorage.getItem('globalTheme') === 'dark',
  )
}

const preferTheme = () => {
  const colorSchema = window.matchMedia('(prefers-color-scheme: dark)')
  const prefersDark = colorSchema.matches
  !localStorage.getItem('globalTheme')
    && localStorage.setItem('globalTheme', prefersDark ? 'dark' : 'light')
  const setting = localStorage.getItem('globalTheme')
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
  toggleThemeIcon()
  colorSchema.addEventListener('change', () => {
    document.documentElement.classList.toggle('dark', colorSchema.matches)
    localStorage.setItem(
      'globalTheme',
      colorSchema.matches ? 'dark' : 'light',
    )
    toggleThemeIcon()
  })
}
const toggleTheme = () => {
  const isDark = document.documentElement.classList.toggle('dark')
  localStorage.setItem('globalTheme', isDark ? 'dark' : 'light')
  toggleThemeIcon()
}
preferTheme()
themeToggle.addEventListener('click', toggleTheme)
</script>

<style>

</style>
